{"version":3,"sources":["img/4.png","img/2.png","utils/sliceBetweenWords.js","utils/store/storeClass.js","utils/store/StoreContext.js","components/YandexMap.js","components/RecyclePoints.js","components/ExternalLink.js","utils/preventMobileScrolling.js","components/ProjectDescription.js","App.js","utils/store/index.js","serviceWorker.js","index.js"],"names":["module","exports","sliceBetweenWords","string","openTag","closeTag","start","end","index","toLowerCase","indexOf","length","slice","tagsMap","tag","propName","required","store","props","get","data","this","Promise","res","rej","a","axios","DBlink","listId","lists","filter","list","name","mappedPoints","cards","card","idList","id","map","damadged","parsedTags","parsedText","desc","reduce","b","pos","posX","posY","heading","point","StoreContext","React","createContext","ZoomByDelta","deltaLessThan","zoom","sizeConverter","size","W","H","iconImageSize","Math","round","iconImageOffset","getIcon","icon","parseInt","Icon2","Icon4","addPoint","address","window","ymaps","geocode","result","geoObjects","geometry","_coordinates","add","Placemark","balloonContent","addressNice","time","comment","img","iconCaption","iconLayout","iconImageHref","replacePoints","points","removeAll","minX","maxX","minY","maxY","pointIndex","min","max","setCenter","deltaX","deltaY","aspect","mapRef","current","clientWidth","clientHeight","maxDelta","setZoom","componentDidMount","ready","Map","center","setState","render","ref","state","createRef","Component","RecyclePoints","initData","context","className","contextType","href","to","target","newTab","rel","children","preventDefault","event","infoBlocks","h2","ExternalLink","bottom","link","person","Array","isArray","ProjectDescription","element","aboutButtonRef","addEventListener","passive","componentWillUnmount","removeEventListener","onClick","showMobile","item","App","stateRefs","Provider","value","storeClass","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.d7564b4e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/4.5e76256e.png\";","module.exports = __webpack_public_path__ + \"static/media/2.95988a1c.png\";","const sliceBetweenWords = (string, openTag, closeTag) => {\r\n  let start = 0, end = -1\r\n  \r\n  const index = string\r\n    .toLowerCase()\r\n    .indexOf(openTag.toLowerCase())\r\n\r\n  if (index !== -1)\r\n    start = index + openTag.length\r\n\r\n    \r\n  if (closeTag) {\r\n    const index = string\r\n      .toLowerCase()\r\n      .indexOf(closeTag.toLowerCase())\r\n\r\n    if (index !== -1)\r\n      end = index\r\n  }\r\n\r\n  if (start === 0)\r\n    return \"\"\r\n  if (end === -1)\r\n    return string.slice(start)\r\n\r\n\r\n  return string.slice(start, end)\r\n}\r\n\r\nexport default sliceBetweenWords","import axios from 'axios'\r\n\r\nimport sliceBetweenWords from '../sliceBetweenWords'\r\n\r\n\r\nconst tagsMap = [\r\n  {\r\n    tag: \"широта\",\r\n    propName: \"posX\",\r\n    required: true,\r\n  },\r\n  {\r\n    tag: \"долгота\",\r\n    propName: \"posY\",\r\n    required: true,\r\n  },\r\n  {\r\n    tag: \"адрес\",\r\n    propName: \"address\",\r\n    // required: true,\r\n  },\r\n  {\r\n    tag: \"время работы\",\r\n    propName: \"time\",\r\n  },\r\n  {\r\n    tag: \"комментарий\",\r\n    propName: \"comment\",\r\n  },\r\n  {\r\n    tag: \"картинка\",\r\n    propName: \"img\",\r\n  },\r\n  {\r\n    tag: \"icon\",\r\n    propName: \"icon\",\r\n  },\r\n]\r\n\r\n\r\nexport default class store {\r\n  constructor(props) {\r\n    this.props = props\r\n    this.data = new Promise(async (res, rej) => {\r\n      const data = (await axios.get(props.DBlink)).data\r\n      let listId = data.lists.filter(list => list.name === \"Database\")\r\n\r\n      if (listId.length < 1)\r\n        rej(\"no Database board\")\r\n\r\n      const mappedPoints = data.cards\r\n        .filter(card => card.idList === listId[0].id)\r\n        .map(card => {\r\n          let damadged = false\r\n          const parsedTags = tagsMap\r\n            .map(tag => {\r\n              const parsedText = sliceBetweenWords(card.desc, `<${tag.tag}>`, `</${tag.tag}>`)\r\n              \r\n              if (tag.required && parsedText === \"\")\r\n                damadged = true\r\n\r\n              return ({[tag.propName]: parsedText})\r\n            })\r\n            .reduce((a, b) => ({...a, ...b}))\r\n\r\n          return ({\r\n            ...parsedTags,\r\n            pos: [parsedTags.posX, parsedTags.posY],\r\n            heading: card.name,\r\n            damadged: damadged\r\n          })\r\n        })\r\n        .filter(point => !point.damadged)\r\n\r\n      res(mappedPoints)\r\n    })\r\n  }\r\n\r\n  get = () => this.data\r\n}","import React from 'react'\r\n\r\nconst StoreContext = React.createContext(\"new store()\")\r\nexport default StoreContext","import React, { Component } from 'react'\r\n\r\nimport Icon4 from '../img/4.png'\r\nimport Icon2 from '../img/2.png'\r\n\r\n\r\nconst ZoomByDelta = [\r\n  {\r\n    deltaLessThan: 5,\r\n    zoom: 8,\r\n  },\r\n  {\r\n    deltaLessThan: 2.5,\r\n    zoom: 9,\r\n  },\r\n  {\r\n    deltaLessThan: 1.5,\r\n    zoom: 10,\r\n  },\r\n  {\r\n    deltaLessThan: 1,\r\n    zoom: 11,\r\n  },\r\n  {\r\n    deltaLessThan: .5,\r\n    zoom: 12,\r\n  },\r\n  {\r\n    deltaLessThan: 0.035,\r\n    zoom: 13,\r\n  },\r\n  {\r\n    deltaLessThan: 0.025,\r\n    zoom: 14,\r\n  },\r\n  {\r\n    deltaLessThan: 0.004,\r\n    zoom: 15,\r\n  },\r\n  {\r\n    deltaLessThan: 0.0005,\r\n    zoom: 16,\r\n  },\r\n  {\r\n    deltaLessThan: 0.00025,\r\n    zoom: 17,\r\n  },\r\n]\r\n\r\nconst sizeConverter = (size, W = 228, H = 326) =>\r\n  ({\r\n    iconImageSize: [Math.round(W / 10 * size), Math.round(H / 10 * size)],\r\n    iconImageOffset: [-Math.round(W / 20 * size), -Math.round(H * .95 / 10 * size)]\r\n  })\r\n\r\nconst getIcon = icon => {\r\n  switch (parseInt(icon)) {\r\n    case 2:\r\n      return Icon2\r\n    default:\r\n      return Icon4\r\n  }\r\n}\r\n\r\n\r\nexport default class extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      ready: false,\r\n      replacePoints: this.replacePoints,\r\n    }\r\n\r\n    this.mapRef = new React.createRef()\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (!state.ready)\r\n      return state\r\n\r\n    state.replacePoints(props)\r\n    return state\r\n  }\r\n\r\n  addPoint = async point => new Promise(async (res, rej) => {\r\n    let pos\r\n\r\n    if (point.pos)\r\n      pos = point.pos\r\n    else {\r\n      if (!point.address)\r\n        rej(\"no pos, no address\")\r\n\r\n      const result = await window.ymaps.geocode(\"Россия, Санкт-Петербург, \" + point.address)\r\n      pos = result.geoObjects.get(0).geometry._coordinates\r\n    }\r\n\r\n\r\n    const added = this.map.geoObjects\r\n      .add(new window.ymaps.Placemark(\r\n        pos,\r\n        {\r\n          balloonContent: `\r\n            <div class=\"yandex-baloon\">\r\n              <h2 style=\"margin-bottom: 10px\">${point.heading}</h2>\r\n              <small><i>${point.addressNice || point.address}</i></small><br>\r\n              <h3 style=\"margin-bottom: 10px\">Время работы: ${point.time}</h3><br>\r\n              ${point.comment}<br><br>\r\n              ${point.img !== \"\" ? `<img style='width: 70%' src=${point.img}></img>` : \"\"}\r\n            </div>\r\n            `,\r\n          iconCaption: point.heading,\r\n        },{\r\n          iconLayout: 'default#image',\r\n          iconImageHref: getIcon(point.icon),\r\n          ...sizeConverter(1.7)\r\n        }\r\n      ))\r\n\r\n    res(pos) //REDO\r\n  })\r\n\r\n  replacePoints = async props => {\r\n    if (!(props.points?.length > 0))\r\n      return\r\n\r\n    this.map.geoObjects.removeAll()\r\n    this.minX = null\r\n    this.maxX = null\r\n    this.minY = null\r\n    this.maxY = null\r\n\r\n    for (let pointIndex in props.points) {\r\n      const point = props.points[pointIndex]\r\n      const res = await this.addPoint(point)\r\n\r\n      this.minX = this.minX === null ? res[0] : Math.min(res[0], this.minX)\r\n      this.maxX = this.maxX === null ? res[0] : Math.max(res[0], this.maxX)\r\n      this.minY = this.minY === null ? res[1] : Math.min(res[1], this.minY)\r\n      this.maxY = this.maxY === null ? res[1] : Math.max(res[1], this.maxY)\r\n    }\r\n\r\n    this.map.setCenter([(this.minX + this.maxX) / 2, (this.minY + this.maxY) / 2])\r\n\r\n    const deltaX = this.maxX - this.minX\r\n    const deltaY = this.maxY - this.minY\r\n    const aspect = this.mapRef.current.clientWidth / this.mapRef.current.clientHeight\r\n    const maxDelta = deltaX / deltaY > aspect ? deltaY : deltaX\r\n    \r\n    let index = 0\r\n    while (ZoomByDelta[index].deltaLessThan > maxDelta && index < ZoomByDelta.length)\r\n      index++\r\n    if (index >= 0 && index < ZoomByDelta.length)\r\n      this.map.setZoom(ZoomByDelta[index - 1].zoom)\r\n\r\n  }\r\n\r\n\r\n  componentDidMount = () => \r\n    // setTimeout(() =>\r\n      window.ymaps.ready(() => {\r\n        this.map = new window.ymaps.Map(\"map\", {\r\n          center: [59.946897, 30.332514],\r\n          zoom: 11\r\n        })\r\n        this.setState({ready: true})\r\n      })\r\n    // , 500)\r\n\r\n  render = () =>\r\n    <div\r\n      id=\"map\"\r\n      ref={this.mapRef}\r\n    />\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport { StoreContext } from '../utils/store'\r\nimport YandexMap from './YandexMap'\r\n\r\n\r\nclass RecyclePoints extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      points: []\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => this.initData()\r\n\r\n  initData = async () => this.setState({points: await this.context.store.get()})\r\n\r\n  render = () => (\r\n    <div className=\"random-events\" id=\"random-events\">\r\n      <div className=\"random-events__map-container\">\r\n        <YandexMap\r\n          points={this.state.points}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nRecyclePoints.contextType = StoreContext\r\n\r\nexport default RecyclePoints\r\n","import React from 'react'\r\n\r\nexport default (props) => (\r\n  <a\r\n    className={props.className}\r\n    href={props.to}\r\n    target={props.newTab ? \"_blank\" : \"\"}\r\n    rel=\"noopener noreferrer\"\r\n  >\r\n    {props.children}\r\n  </a>\r\n)","const preventDefault = event => event.preventDefault()\r\n\r\nconst registerListeners = element => {\r\n  element.addEventListener( 'wheel', preventDefault, { passive: false } )\r\n  // element.addEventListener( 'touchstart', preventDefault, { passive: false } )\r\n  // element.addEventListener( 'touchend', preventDefault, { passive: false } )\r\n  element.addEventListener( 'touchmove', preventDefault, { passive: false } )\r\n}\r\n\r\nconst unregisterListeners = element => {\r\n  element.removeEventListener( 'wheel', preventDefault, { passive: false } )\r\n  // element.removeEventListener( 'touchstart', preventDefault, { passive: false } )\r\n  // element.removeEventListener( 'touchend', preventDefault, { passive: false } )\r\n  element.removeEventListener( 'touchmove', preventDefault, { passive: false } )\r\n}\r\n\r\nexport { registerListeners, unregisterListeners }","import React, { Component } from 'react'\r\n\r\nimport { StoreContext } from '../utils/store'\r\nimport ExternalLink from './ExternalLink'\r\nimport { registerListeners, unregisterListeners } from '../utils/preventMobileScrolling'\r\n\r\n\r\nconst infoBlocks = [\r\n  {\r\n    h2: \"Организатор проекта\",\r\n    desc: <>\r\n      Студенческое объединение <ExternalLink to=\"http://regreen.tilda.ws/we\">REGREEN</ExternalLink>. Основной задачей объединения является изменение мира к лучшему и вовлечение в культуру устойчивого развития.\r\n    </>,\r\n    bottom: <>\r\n      <ExternalLink to=\"https://vk.com/regreen_polytech\">VK</ExternalLink>, <ExternalLink to=\"https://www.instagram.com/regreenpolytech/\">instagram</ExternalLink>\r\n    </>\r\n  },\r\n  {\r\n    h2: \"Проект реализовали\",\r\n    desc: <>\r\n      {[\r\n        {\r\n          name: \"Роберт Андреев\",\r\n          link: \"https://vk.com/lelysh1\",\r\n        },\r\n        {\r\n          name: \"Лев Васильев\",\r\n          link: \"https://kiss-graph.com/node/the_sociophobic\",\r\n        },\r\n        {\r\n          name: \"Армен Барсегян\",\r\n          link: \"https://vk.com/doc.schulz\",\r\n        },\r\n        {\r\n          name: \"Ван Сыюй\",\r\n          link: \"https://vk.com/wangera\",\r\n        },\r\n        {\r\n          name: \"Жэнь Мэнгуан\",\r\n          link: \"https://vk.com/id459591978\",\r\n        },\r\n        {\r\n          name: \"Игорь Лебедев\",\r\n          link: \"https://vk.com/id51388488\",\r\n        },\r\n      ].map(person =>\r\n        <ExternalLink to={person.link}>{person.name}</ExternalLink>\r\n      ).reduce((a, b) => Array.isArray(a) ? [...a, \", \", b] : [a, \", \", b])\r\n      } в рамках работы по предмету Основы Проектной Деятельности.\r\n    </>,\r\n    // bottom: <>\r\n    //   Исходный код на <ExternalLink to=\"https://github.com/the-sociophobic/recycle-polytech\">github.com</ExternalLink>\r\n    // </>\r\n  },\r\n]\r\n\r\n\r\nclass ProjectDescription extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      showMobile: false\r\n    }\r\n\r\n    this.aboutButtonRef = React.createRef()\r\n  }\r\n\r\n  componentDidMount = () =>\r\n    registerListeners(this.aboutButtonRef.current)\r\n  componentWillUnmount = () =>\r\n    unregisterListeners(this.aboutButtonRef.current)\r\n\r\n  render = () => (\r\n    <div className=\"project-description\">\r\n      <div\r\n        ref={this.aboutButtonRef}\r\n        className=\"project-description__mobile-open\"\r\n        onClick={() => this.setState({showMobile: true})}\r\n      >\r\n        О Проекте\r\n      </div>\r\n      <div className={\"project-description__container \" + (this.state.showMobile && \"project-description__container--open\")}>\r\n        <div\r\n          className=\"project-description__mobile-close\"\r\n          onClick={() => this.setState({showMobile: false})}\r\n        />\r\n        <div className=\"project-description__h1\">\r\n          Карта раздельного сбора в Политехе\r\n        </div>\r\n        <div className=\"project-description__blocks\">\r\n          {infoBlocks.map(item =>\r\n            <div className=\"project-description__blocks__item\">\r\n              <div className=\"project-description__blocks__item__h2\">\r\n                {item.h2}\r\n              </div>\r\n              <div className=\"project-description__blocks__item__desc\">\r\n                {item.desc}\r\n              </div>\r\n              {item.bottom &&\r\n                <div className=\"project-description__blocks__item__bottom\">\r\n                  {item.bottom}\r\n                </div>}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nProjectDescription.contextType = StoreContext\r\n\r\nexport default ProjectDescription\r\n","import React, { Component } from 'react'\r\n\r\nimport { initialState, StoreContext } from './utils/store'\r\nimport RecyclePoints from './components/RecyclePoints'\r\nimport ProjectDescription from './components/ProjectDescription'\r\n\r\nimport './styles/index.sass'\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = initialState({\r\n      state: this.state,\r\n      setState: this.setState,\r\n    })\r\n  }\r\n\r\n  render = () => (\r\n    <StoreContext.Provider value={this.state}>\r\n      <div className=\"App\">\r\n        <ProjectDescription />\r\n        <RecyclePoints />\r\n      </div>\r\n    </StoreContext.Provider>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import storeClass from './storeClass'\r\nimport StoreContext from './StoreContext'\r\n\r\n\r\nconst initialState = stateRefs => ({\r\n  store: new storeClass({\r\n    stateRefs: stateRefs,\r\n    DBlink: \"https://trello.com/b/nKrfhtNh.json\",\r\n  }),\r\n})\r\n\r\nexport {\r\n  storeClass,\r\n  StoreContext,\r\n  initialState,\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}