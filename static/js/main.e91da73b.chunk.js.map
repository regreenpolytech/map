{"version":3,"sources":["img/4.png","img/2.png","utils/sliceBetweenWords.js","utils/store/storeClass.js","utils/store/StoreContext.js","components/YandexMap.js","components/RecyclePoints.js","components/ExternalLink.js","components/ProjectDescription.js","App.js","utils/store/index.js","index.js"],"names":["module","exports","sliceBetweenWords","string","openTag","closeTag","start","end","index","toLowerCase","indexOf","length","slice","tagsMap","tag","propName","required","store","props","get","data","this","Promise","res","rej","a","axios","DBlink","listId","lists","filter","list","name","mappedPoints","cards","card","idList","id","map","damadged","parsedTags","parsedText","desc","reduce","b","pos","posX","posY","heading","point","StoreContext","React","createContext","ZoomByDelta","deltaLessThan","zoom","sizeConverter","size","W","H","iconImageSize","Math","round","iconImageOffset","getIcon","icon","parseInt","Icon2","Icon4","addPoint","address","window","ymaps","geocode","result","geoObjects","geometry","_coordinates","add","Placemark","balloonContent","addressNice","time","comment","img","iconCaption","iconLayout","iconImageHref","replacePoints","points","removeAll","minX","maxX","minY","maxY","pointIndex","min","max","setCenter","deltaX","deltaY","aspect","mapRef","current","clientWidth","clientHeight","maxDelta","setZoom","componentDidMount","ready","Map","center","setState","render","ref","state","createRef","Component","RecyclePoints","initData","context","className","contextType","href","to","target","newTab","rel","children","infoBlocks","h2","ExternalLink","bottom","link","person","Array","isArray","ProjectDescription","onClick","showMobile","item","App","stateRefs","Provider","value","storeClass","getNode","require","nodeId","triesNumber","tryCounter","elementLoadedChecker","setInterval","elem","document","getElementById","clearInterval","console","log","tryInjectReact","component","divId","catch","error","ReactDOM","addEventListener","threeSceneElem","unmountComponentAtNode"],"mappings":"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","file":"static/js/main.e91da73b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/4.5e76256e.png\";","module.exports = __webpack_public_path__ + \"static/media/2.95988a1c.png\";","const sliceBetweenWords = (string, openTag, closeTag) => {\n  let start = 0, end = -1\n  \n  const index = string\n    .toLowerCase()\n    .indexOf(openTag.toLowerCase())\n\n  if (index !== -1)\n    start = index + openTag.length\n\n    \n  if (closeTag) {\n    const index = string\n      .toLowerCase()\n      .indexOf(closeTag.toLowerCase())\n\n    if (index !== -1)\n      end = index\n  }\n\n  if (start === 0)\n    return \"\"\n  if (end === -1)\n    return string.slice(start)\n\n\n  return string.slice(start, end)\n}\n\nexport default sliceBetweenWords","import axios from 'axios'\n\nimport sliceBetweenWords from '../sliceBetweenWords'\n\n\nconst tagsMap = [\n  {\n    tag: \"широта\",\n    propName: \"posX\",\n    required: true,\n  },\n  {\n    tag: \"долгота\",\n    propName: \"posY\",\n    required: true,\n  },\n  {\n    tag: \"адрес\",\n    propName: \"address\",\n    // required: true,\n  },\n  {\n    tag: \"время работы\",\n    propName: \"time\",\n  },\n  {\n    tag: \"комментарий\",\n    propName: \"comment\",\n  },\n  {\n    tag: \"картинка\",\n    propName: \"img\",\n  },\n  {\n    tag: \"icon\",\n    propName: \"icon\",\n  },\n]\n\n\nexport default class store {\n  constructor(props) {\n    this.props = props\n    this.data = new Promise(async (res, rej) => {\n      const data = (await axios.get(props.DBlink)).data\n      let listId = data.lists.filter(list => list.name === \"Database\")\n\n      if (listId.length < 1)\n        rej(\"no Database board\")\n\n      const mappedPoints = data.cards\n        .filter(card => card.idList === listId[0].id)\n        .map(card => {\n          let damadged = false\n          const parsedTags = tagsMap\n            .map(tag => {\n              const parsedText = sliceBetweenWords(card.desc, `<${tag.tag}>`, `</${tag.tag}>`)\n              \n              if (tag.required && parsedText === \"\")\n                damadged = true\n\n              return ({[tag.propName]: parsedText})\n            })\n            .reduce((a, b) => ({...a, ...b}))\n\n          return ({\n            ...parsedTags,\n            pos: [parsedTags.posX, parsedTags.posY],\n            heading: card.name,\n            damadged: damadged\n          })\n        })\n        .filter(point => !point.damadged)\n\n      res(mappedPoints)\n    })\n  }\n\n  get = () => this.data\n}","import React from 'react'\n\nconst StoreContext = React.createContext(\"new store()\")\nexport default StoreContext","import React, { Component } from 'react'\n\nimport Icon4 from '../img/4.png'\nimport Icon2 from '../img/2.png'\n\n// const defaultIcon = \"https://kiss-graph.com/libs/recycle-polytech/icon.png\"\n// const defaultIcon = \"https://psv4.userapi.com/c856324/u11879299/docs/d6/ae06efa44783/4.png?extra=8HHIdRz4hALH0uypp8SuDqSXGoy9xG_vxXIaEX260xetYB-CABTFQnTtqMhLIzW86lIhn4aCGSJYv-Ly_rfqh5bgYXve1rCRT1_ahqGsFbiuH6Q7NDt9sZ8tzm6pugfTJYQeQk4aEd2fEgnhdrw3uA\"\n// const defaultIcon2 = \"https://psv4.userapi.com/c856324/u11879299/docs/d15/899a97aced98/2.png?extra=RzRxjOpMkV5KkdsWzr0W1tYsrREKw8paxIUKP-SZJaaYMbjTSJn1nlmOONpotbnfrpbmysDWZ-cPjFixGMBJ823NyTygweTfXjlVIYouZ6GCT557waT__TFJx556HAXs5IesTNSB4m8AjXfX9-Jk6Q\"\n\nconst ZoomByDelta = [\n  {\n    deltaLessThan: 5,\n    zoom: 8,\n  },\n  {\n    deltaLessThan: 2.5,\n    zoom: 9,\n  },\n  {\n    deltaLessThan: 1.5,\n    zoom: 10,\n  },\n  {\n    deltaLessThan: 1,\n    zoom: 11,\n  },\n  {\n    deltaLessThan: .5,\n    zoom: 12,\n  },\n  {\n    deltaLessThan: 0.035,\n    zoom: 13,\n  },\n  {\n    deltaLessThan: 0.025,\n    zoom: 14,\n  },\n  {\n    deltaLessThan: 0.004,\n    zoom: 15,\n  },\n  {\n    deltaLessThan: 0.0005,\n    zoom: 16,\n  },\n  {\n    deltaLessThan: 0.00025,\n    zoom: 17,\n  },\n]\n\nconst sizeConverter = (size, W = 228, H = 326) =>\n  ({\n    iconImageSize: [Math.round(W / 10 * size), Math.round(H / 10 * size)],\n    iconImageOffset: [-Math.round(W / 20 * size), -Math.round(H * .95 / 10 * size)]\n  })\n\nconst getIcon = icon => {\n  switch (parseInt(icon)) {\n    case 2:\n      return Icon2\n    default:\n      return Icon4\n  }\n}\n\n\nexport default class extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      ready: false,\n      replacePoints: this.replacePoints,\n    }\n\n    this.mapRef = new React.createRef()\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (!state.ready)\n      return state\n\n    state.replacePoints(props)\n    return state\n  }\n\n  addPoint = async point => new Promise(async (res, rej) => {\n    let pos\n\n    if (point.pos)\n      pos = point.pos\n    else {\n      if (!point.address)\n        rej(\"no pos, no address\")\n\n      const result = await window.ymaps.geocode(\"Россия, Санкт-Петербург, \" + point.address)\n      pos = result.geoObjects.get(0).geometry._coordinates\n    }\n\n\n    const added = this.map.geoObjects\n      .add(new window.ymaps.Placemark(\n        pos,\n        {\n          balloonContent: `\n            <div class=\"yandex-baloon\">\n              <h2 style=\"margin-bottom: 10px\">${point.heading}</h2>\n              <small><i>${point.addressNice || point.address}</i></small><br>\n              <h3 style=\"margin-bottom: 10px\">Время работы: ${point.time}</h3><br>\n              ${point.comment}<br><br>\n              ${point.img !== \"\" ? `<img style='width: 70%' src=${point.img}></img>` : \"\"}\n            </div>\n            `,\n          iconCaption: point.heading,\n        },{\n          iconLayout: 'default#image',\n          iconImageHref: getIcon(point.icon),\n          ...sizeConverter(1.7)\n        }\n      ))\n\n    res(pos) //REDO\n  })\n\n  replacePoints = async props => {\n    if (!(props.points?.length > 0))\n      return\n\n    this.map.geoObjects.removeAll()\n    this.minX = null\n    this.maxX = null\n    this.minY = null\n    this.maxY = null\n\n    for (let pointIndex in props.points) {\n      const point = props.points[pointIndex]\n      const res = await this.addPoint(point)\n\n      this.minX = this.minX === null ? res[0] : Math.min(res[0], this.minX)\n      this.maxX = this.maxX === null ? res[0] : Math.max(res[0], this.maxX)\n      this.minY = this.minY === null ? res[1] : Math.min(res[1], this.minY)\n      this.maxY = this.maxY === null ? res[1] : Math.max(res[1], this.maxY)\n    }\n\n    this.map.setCenter([(this.minX + this.maxX) / 2, (this.minY + this.maxY) / 2])\n\n    const deltaX = this.maxX - this.minX\n    const deltaY = this.maxY - this.minY\n    const aspect = this.mapRef.current.clientWidth / this.mapRef.current.clientHeight\n    const maxDelta = deltaX / deltaY > aspect ? deltaY : deltaX\n    \n    let index = 0\n    while (ZoomByDelta[index].deltaLessThan > maxDelta && index < ZoomByDelta.length)\n      index++\n    if (index >= 0 && index < ZoomByDelta.length)\n      this.map.setZoom(ZoomByDelta[index - 1].zoom)\n\n  }\n\n\n  componentDidMount = () => \n    // setTimeout(() =>\n      window.ymaps.ready(() => {\n        this.map = new window.ymaps.Map(\"map\", {\n          center: [59.946897, 30.332514],\n          zoom: 11\n        })\n        this.setState({ready: true})\n      })\n    // , 500)\n\n  render = () =>\n    <div\n      id=\"map\"\n      ref={this.mapRef}\n    />\n}\n","import React, { Component } from 'react'\n\nimport { StoreContext } from '../utils/store'\nimport YandexMap from './YandexMap'\n\n\nclass RecyclePoints extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      points: []\n    }\n  }\n\n  componentDidMount = () => this.initData()\n\n  initData = async () => this.setState({points: await this.context.store.get()})\n\n  render = () => (\n    <div className=\"random-events\" id=\"random-events\">\n      <div className=\"random-events__map-container\">\n        <YandexMap\n          points={this.state.points}\n        />\n      </div>\n    </div>\n  )\n}\n\nRecyclePoints.contextType = StoreContext\n\nexport default RecyclePoints\n","import React from 'react'\n\nexport default (props) => (\n  <a\n    className={props.className}\n    href={props.to}\n    target={props.newTab ? \"_blank\" : \"\"}\n    rel=\"noopener noreferrer\"\n  >\n    {props.children}\n  </a>\n)","import React, { Component } from 'react'\n\nimport { StoreContext } from '../utils/store'\nimport ExternalLink from './ExternalLink'\n\n\nconst infoBlocks = [\n  {\n    h2: \"Организатор проекта\",\n    desc: <>\n      Студенческое объединение <ExternalLink to=\"http://regreen.tilda.ws/we\">REGREEN</ExternalLink>. Основной задачей объединия является изменение мира к лучшему и вовлечение в культуру устойчивого развития.\n    </>,\n    bottom: <>\n      <ExternalLink to=\"https://vk.com/regreen_polytech\">VK</ExternalLink>, <ExternalLink to=\"https://www.instagram.com/regreenpolytech/\">instagram</ExternalLink>\n    </>\n  },\n  {\n    h2: \"Проект реализовали\",\n    desc: <>\n      {[\n        {\n          name: \"Роберт Андреев\",\n          link: \"https://vk.com/lelysh1\",\n        },\n        {\n          name: \"Лев Васильев\",\n          link: \"https://kiss-graph.com/node/the_sociophobic\",\n        },\n        {\n          name: \"Армен Барсегян\",\n          link: \"https://vk.com/doc.schulz\",\n        },\n        {\n          name: \"Ван Сыюй\",\n          link: \"https://vk.com/wangera\",\n        },\n        {\n          name: \"Жэнь Мэнгуан\",\n          link: \"https://vk.com/id459591978\",\n        },\n        {\n          name: \"Игорь Лебедев\",\n          link: \"https://vk.com/id51388488\",\n        },\n      ].map(person =>\n        <ExternalLink to={person.link}>{person.name}</ExternalLink>\n      ).reduce((a, b) => Array.isArray(a) ? [...a, \", \", b] : [a, \", \", b])\n      } в рамках работы по предмету Основы Проектной Деятельности.\n    </>,\n    bottom: <>\n      Исходный код на <ExternalLink to=\"https://github.com/the-sociophobic/recycle-polytech\">github.com</ExternalLink>\n    </>\n  },\n]\n\n\nclass ProjectDescription extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showMobile: false\n    }\n  }\n\n  render = () => (\n    <div className=\"project-description\">\n      <div\n        className=\"project-description__mobile-open\"\n        onClick={() => this.setState({showMobile: true})}\n      >\n        О Проекте\n      </div>\n      <div className={\"project-description__container \" + (this.state.showMobile && \"project-description__container--open\")}>\n        <div\n          className=\"project-description__mobile-close\"\n          onClick={() => this.setState({showMobile: false})}\n        />\n        <div className=\"project-description__h1\">\n          Карта раздельного сбора в Политехе\n        </div>\n        <div className=\"project-description__blocks\">\n          {infoBlocks.map(item =>\n            <div className=\"project-description__blocks__item\">\n              <div className=\"project-description__blocks__item__h2\">\n                {item.h2}\n              </div>\n              <div className=\"project-description__blocks__item__desc\">\n                {item.desc}\n              </div>\n              <div className=\"project-description__blocks__item__bottom\">\n                {item.bottom}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nProjectDescription.contextType = StoreContext\n\nexport default ProjectDescription\n","import React, { Component } from 'react'\n\nimport { initialState, StoreContext } from './utils/store'\nimport RecyclePoints from './components/RecyclePoints'\nimport ProjectDescription from './components/ProjectDescription'\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = initialState({\n      state: this.state,\n      setState: this.setState,\n    })\n  }\n\n  render = () => (\n    <StoreContext.Provider value={this.state}>\n      <div className=\"App\">\n        <ProjectDescription />\n        <RecyclePoints />\n      </div>\n    </StoreContext.Provider>\n  )\n}\n\nexport default App\n","import storeClass from './storeClass'\nimport StoreContext from './StoreContext'\n\n\nconst initialState = stateRefs => ({\n  store: new storeClass({\n    stateRefs: stateRefs,\n    DBlink: \"https://trello.com/b/nKrfhtNh.json\",\n  }),\n})\n\nexport {\n  storeClass,\n  StoreContext,\n  initialState,\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nimport './styles/index.sass'\n\n\n//to use async / await\nconst regeneratorRuntime = require(\"regenerator-runtime\")\n\n\nconst getNode = async (nodeId, triesNumber = 20) =>\n  new Promise((res, rej) => {\n    let tryCounter = 0\n    let elementLoadedChecker = setInterval(() => {\n      const elem = document.getElementById(nodeId)\n    \n      if (tryCounter >= triesNumber) {\n        clearInterval(elementLoadedChecker)\n        rej(`#${nodeId} wasn't found after ${triesNumber} tries`)\n      }\n\n      if (!elem) {\n        tryCounter++\n        // console.log(`no #${nodeId} element in the DOM`)\n        return\n      } else {\n        clearInterval(elementLoadedChecker)\n        console.log(`#${nodeId} element found`)\n        res(elem)\n      }\n    }, 200)  \n  })\n\nconst tryInjectReact = async (component, divId) => {\n  const elem = await getNode(divId).catch(error => console.log(error))\n\n  if (elem) {\n    ReactDOM.render(component, elem)\n    console.log(`React injected into #${divId}`)\n  }\n}\n\ntryInjectReact(<App />, \"map-react\")\n\n//remove react-components by React, before readymag do it himself on orientationchange\nwindow.addEventListener(\"orientationchange\", async () => {\n  const threeSceneElem = document.getElementById(\"map-react\")\n\n  threeSceneElem && ReactDOM.unmountComponentAtNode(threeSceneElem)\n}, true)\n\n//inject react-components after orientationchange\nwindow.addEventListener(\"orientationchange\", async () => {\n  const flag = await getNode(\"random-events\", 3).catch(error => console.log(error))\n\n  if (!flag)\n    tryInjectReact(<App />, \"map-react\")\n})"],"sourceRoot":""}