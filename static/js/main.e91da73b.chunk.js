(this.webpackJsonprecycle=this.webpackJsonprecycle||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/4.5e76256e.png"},23:function(e,t,n){e.exports=n.p+"static/media/2.95988a1c.png"},25:function(e,t,n){e.exports=n(48)},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(3),c=n(0),s=n.n(c),i=n(9),m=n.n(i),u=n(4),l=n(5),p=n(6),d=n(7),f=n(8),h=n(20),v=n.n(h),b=function(e,t,n){var a=0,r=-1,o=e.toLowerCase().indexOf(t.toLowerCase());if(-1!==o&&(a=o+t.length),n){var c=e.toLowerCase().indexOf(n.toLowerCase());-1!==c&&(r=c)}return 0===a?"":-1===r?e.slice(a):e.slice(a,r)},g=[{tag:"\u0448\u0438\u0440\u043e\u0442\u0430",propName:"posX",required:!0},{tag:"\u0434\u043e\u043b\u0433\u043e\u0442\u0430",propName:"posY",required:!0},{tag:"\u0430\u0434\u0440\u0435\u0441",propName:"address"},{tag:"\u0432\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b",propName:"time"},{tag:"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",propName:"comment"},{tag:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",propName:"img"},{tag:"icon",propName:"icon"}],w=function e(t){var n=this;Object(u.a)(this,e),this.get=function(){return n.data},this.props=t,this.data=new Promise(function(){var e=Object(o.a)(r.a.mark((function e(n,a){var o,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(t.DBlink);case 2:o=e.sent.data,(c=o.lists.filter((function(e){return"Database"===e.name}))).length<1&&a("no Database board"),s=o.cards.filter((function(e){return e.idList===c[0].id})).map((function(e){var t=!1,n=g.map((function(n){var a=b(e.desc,"<".concat(n.tag,">"),"</".concat(n.tag,">"));return n.required&&""===a&&(t=!0),Object(f.a)({},n.propName,a)})).reduce((function(e,t){return Object(d.a)({},e,{},t)}));return Object(d.a)({},n,{pos:[n.posX,n.posY],heading:e.name,damadged:t})})).filter((function(e){return!e.damadged})),n(s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},x=s.a.createContext("new store()"),j=n(21),k=n(22),_=n.n(k),E=n(23),y=n.n(E),O=[{deltaLessThan:5,zoom:8},{deltaLessThan:2.5,zoom:9},{deltaLessThan:1.5,zoom:10},{deltaLessThan:1,zoom:11},{deltaLessThan:.5,zoom:12},{deltaLessThan:.035,zoom:13},{deltaLessThan:.025,zoom:14},{deltaLessThan:.004,zoom:15},{deltaLessThan:5e-4,zoom:16},{deltaLessThan:25e-5,zoom:17}],N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:228,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:326;return{iconImageSize:[Math.round(t/10*e),Math.round(n/10*e)],iconImageOffset:[-Math.round(t/20*e),-Math.round(.95*n/10*e)]}},L=function(e){switch(parseInt(e)){case 2:return y.a;default:return _.a}},C=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).addPoint=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(r.a.mark((function e(n,o){var c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pos){e.next=4;break}c=t.pos,e.next=9;break;case 4:return t.address||o("no pos, no address"),e.next=7,window.ymaps.geocode("\u0420\u043e\u0441\u0441\u0438\u044f, \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433, "+t.address);case 7:s=e.sent,c=s.geoObjects.get(0).geometry._coordinates;case 9:a.map.geoObjects.add(new window.ymaps.Placemark(c,{balloonContent:'\n            <div class="yandex-baloon">\n              <h2 style="margin-bottom: 10px">'.concat(t.heading,"</h2>\n              <small><i>").concat(t.addressNice||t.address,'</i></small><br>\n              <h3 style="margin-bottom: 10px">\u0412\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b: ').concat(t.time,"</h3><br>\n              ").concat(t.comment,"<br><br>\n              ").concat(""!==t.img?"<img style='width: 70%' src=".concat(t.img,"></img>"):"","\n            </div>\n            "),iconCaption:t.heading},Object(d.a)({iconLayout:"default#image",iconImageHref:L(t.icon)},N(1.7)))),n(c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.replacePoints=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o,c,s,i,m,u,l,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(n=t.points)||void 0===n?void 0:n.length)>0){e.next=2;break}return e.abrupt("return");case 2:a.map.geoObjects.removeAll(),a.minX=null,a.maxX=null,a.minY=null,a.maxY=null,e.t0=r.a.keys(t.points);case 8:if((e.t1=e.t0()).done){e.next=20;break}return o=e.t1.value,c=t.points[o],e.next=13,a.addPoint(c);case 13:s=e.sent,a.minX=null===a.minX?s[0]:Math.min(s[0],a.minX),a.maxX=null===a.maxX?s[0]:Math.max(s[0],a.maxX),a.minY=null===a.minY?s[1]:Math.min(s[1],a.minY),a.maxY=null===a.maxY?s[1]:Math.max(s[1],a.maxY),e.next=8;break;case 20:for(a.map.setCenter([(a.minX+a.maxX)/2,(a.minY+a.maxY)/2]),i=a.maxX-a.minX,m=a.maxY-a.minY,u=a.mapRef.current.clientWidth/a.mapRef.current.clientHeight,l=i/m>u?m:i,p=0;O[p].deltaLessThan>l&&p<O.length;)p++;p>=0&&p<O.length&&a.map.setZoom(O[p-1].zoom);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){return window.ymaps.ready((function(){a.map=new window.ymaps.Map("map",{center:[59.946897,30.332514],zoom:11}),a.setState({ready:!0})}))},a.render=function(){return s.a.createElement("div",{id:"map",ref:a.mapRef})},a.state={ready:!1,replacePoints:a.replacePoints},a.mapRef=new s.a.createRef,a}return Object(j.a)(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.ready?(t.replacePoints(e),t):t}}]),n}(c.Component),M=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){return a.initData()},a.initData=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,a.context.store.get();case 3:return e.t1=e.sent,e.t2={points:e.t1},e.abrupt("return",e.t0.setState.call(e.t0,e.t2));case 6:case"end":return e.stop()}}),e)}))),a.render=function(){return s.a.createElement("div",{className:"random-events",id:"random-events"},s.a.createElement("div",{className:"random-events__map-container"},s.a.createElement(C,{points:a.state.points})))},a.state={points:[]},a}return n}(c.Component);M.contextType=x;var z=M,T=n(24),X=function(e){return s.a.createElement("a",{className:e.className,href:e.to,target:e.newTab?"_blank":"",rel:"noopener noreferrer"},e.children)},Y=[{h2:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",desc:s.a.createElement(s.a.Fragment,null,"\u0421\u0442\u0443\u0434\u0435\u043d\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 ",s.a.createElement(X,{to:"http://regreen.tilda.ws/we"},"REGREEN"),". \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0435\u0439 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u0438\u0440\u0430 \u043a \u043b\u0443\u0447\u0448\u0435\u043c\u0443 \u0438 \u0432\u043e\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u0435 \u0432 \u043a\u0443\u043b\u044c\u0442\u0443\u0440\u0443 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0433\u043e \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044f."),bottom:s.a.createElement(s.a.Fragment,null,s.a.createElement(X,{to:"https://vk.com/regreen_polytech"},"VK"),", ",s.a.createElement(X,{to:"https://www.instagram.com/regreenpolytech/"},"instagram"))},{h2:"\u041f\u0440\u043e\u0435\u043a\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043b\u0438",desc:s.a.createElement(s.a.Fragment,null,[{name:"\u0420\u043e\u0431\u0435\u0440\u0442 \u0410\u043d\u0434\u0440\u0435\u0435\u0432",link:"https://vk.com/lelysh1"},{name:"\u041b\u0435\u0432 \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432",link:"https://kiss-graph.com/node/the_sociophobic"},{name:"\u0410\u0440\u043c\u0435\u043d \u0411\u0430\u0440\u0441\u0435\u0433\u044f\u043d",link:"https://vk.com/doc.schulz"},{name:"\u0412\u0430\u043d \u0421\u044b\u044e\u0439",link:"https://vk.com/wangera"},{name:"\u0416\u044d\u043d\u044c \u041c\u044d\u043d\u0433\u0443\u0430\u043d",link:"https://vk.com/id459591978"},{name:"\u0418\u0433\u043e\u0440\u044c \u041b\u0435\u0431\u0435\u0434\u0435\u0432",link:"https://vk.com/id51388488"}].map((function(e){return s.a.createElement(X,{to:e.link},e.name)})).reduce((function(e,t){return Array.isArray(e)?[].concat(Object(T.a)(e),[", ",t]):[e,", ",t]}))," \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0443 \u041e\u0441\u043d\u043e\u0432\u044b \u041f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0414\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438."),bottom:s.a.createElement(s.a.Fragment,null,"\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043a\u043e\u0434 \u043d\u0430 ",s.a.createElement(X,{to:"https://github.com/the-sociophobic/recycle-polytech"},"github.com"))}],P=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).render=function(){return s.a.createElement("div",{className:"project-description"},s.a.createElement("div",{className:"project-description__mobile-open",onClick:function(){return a.setState({showMobile:!0})}},"\u041e \u041f\u0440\u043e\u0435\u043a\u0442\u0435"),s.a.createElement("div",{className:"project-description__container "+(a.state.showMobile&&"project-description__container--open")},s.a.createElement("div",{className:"project-description__mobile-close",onClick:function(){return a.setState({showMobile:!1})}}),s.a.createElement("div",{className:"project-description__h1"},"\u041a\u0430\u0440\u0442\u0430 \u0440\u0430\u0437\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u0431\u043e\u0440\u0430 \u0432 \u041f\u043e\u043b\u0438\u0442\u0435\u0445\u0435"),s.a.createElement("div",{className:"project-description__blocks"},Y.map((function(e){return s.a.createElement("div",{className:"project-description__blocks__item"},s.a.createElement("div",{className:"project-description__blocks__item__h2"},e.h2),s.a.createElement("div",{className:"project-description__blocks__item__desc"},e.desc),s.a.createElement("div",{className:"project-description__blocks__item__bottom"},e.bottom))})))))},a.state={showMobile:!1},a}return n}(c.Component);P.contextType=x;var D=P,I=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var a,r;return Object(u.a)(this,n),(a=t.call(this,e)).render=function(){return s.a.createElement(x.Provider,{value:a.state},s.a.createElement("div",{className:"App"},s.a.createElement(D,null),s.a.createElement(z,null)))},a.state=(r={state:a.state,setState:a.setState},{store:new w({stateRefs:r,DBlink:"https://trello.com/b/nKrfhtNh.json"})}),a}return n}(c.Component),R=(n(47),n(10),function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:20,e.abrupt("return",new Promise((function(e,a){var r=0,o=setInterval((function(){var c=document.getElementById(t);r>=n&&(clearInterval(o),a("#".concat(t," wasn't found after ").concat(n," tries"))),c?(clearInterval(o),console.log("#".concat(t," element found")),e(c)):r++}),200)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(n).catch((function(e){return console.log(e)}));case 2:(a=e.sent)&&(m.a.render(t,a),console.log("React injected into #".concat(n)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();S(s.a.createElement(I,null),"map-react"),window.addEventListener("orientationchange",Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.getElementById("map-react"))&&m.a.unmountComponentAtNode(t);case 2:case"end":return e.stop()}}),e)}))),!0),window.addEventListener("orientationchange",Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("random-events",3).catch((function(e){return console.log(e)}));case 2:e.sent||S(s.a.createElement(I,null),"map-react");case 4:case"end":return e.stop()}}),e)}))))}},[[25,1,2]]]);
//# sourceMappingURL=main.e91da73b.chunk.js.map